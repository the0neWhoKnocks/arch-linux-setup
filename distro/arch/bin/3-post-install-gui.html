<!DOCTYPE html>
<html>
  <head>
    <meta name="viewport" content="width=device-width, initial-scale=1">
    
    <style>
      * {
        box-sizing: border-box;
      }
      
      @media (prefers-color-scheme: dark) {
        :root {
          --color--bg: 51, 51, 51; /* #333 */
          --color--fg: 238, 238, 238; /* #eee */
        }
      }
      @media (prefers-color-scheme: light) {
        :root {
          --color--bg: 238, 238, 238; /* #eee */
          --color--fg: 51, 51, 51; /* #333 */
        }
      }
    
      html, body {
        width: 100%;
        height: 100%;
        color: rgb(var(--color--fg));
        font-size: 18px;
        padding: 0;
        margin: 0;
        background: rgb(var(--color--bg));
      }
      body {
        overflow: hidden;
      }
      
      button {
        color: rgb(var(--color--fg));
        font-size: inherit;
        border: solid 1px;
        border-radius: 0.25em;
        background: rgb(var(--color--bg));
      }
    
      form {
        height: 100%;
        padding: 1em;
        display: flex;
        flex-direction: column;
      }
      
      .icon {
        width: 1em;
        height: 1em;
        display: inline-block;
      }
      
      .tabs {
        height: 100%;
        overflow: hidden;
        position: relative;
        display: flex;
        flex-direction: column;
      }
      .tabs::after {
        content: '';
        height: 3em;
        background: linear-gradient(rgba(var(--color--bg), 0), rgb(var(--color--bg)));
        position: absolute;
        left: 0;
        right: 0;
        bottom: 0;
        pointer-events: none;
      }
      
      .tabs [type="checkbox"],
      .tabs [type="radio"] {
        width: 1.4em;
        height: 1.4em;
      }
      
      .tabs select {
        font-size: inherit;
        padding: 0.25em 0.5em;
      }
      
      .tabs-nav {
        height: 40px;
        font-size: 0.8em;
        overflow-x: auto;
        display: flex;
        flex-shrink: 0;
        position: relative;
      }
      .tabs-nav::after {
        content: '';
        height: 1px;
        background: rgb(var(--color--fg));
        position: absolute;
        bottom: 0;
        left: 0;
        right: 0;
        z-index: 1;
      }
      .tabs-nav__btn {
        height: 100%;
        white-space: nowrap;
        padding: 0.5em 1em;
        border-bottom: none;
        border-radius: 0.5em 0.5em 0 0;
        margin: 0;
        position: relative;
        z-index: 0;
        opacity: 0.4;
        display: flex;
        align-items: center;
      }
      .tabs-nav__btn * {
        pointer-events: none;
      }
      .tabs-nav__btn.current {
        z-index: 2;
        opacity: 1;
      }
      .tabs-nav__btn .icon {
        margin-right: 0.25em;
      }
      
      .tab {
        --tabs-nav-height: 40px;
        
        height: calc(100% - var(--tabs-nav-height));
        display: flex;
        flex-direction: column;
      }
      .tab:not(.current) {
        display: none;
      }
      .tab__desc {
        padding: 1em 0;
        display: flex;
        align-items: center;
      }
      .tab__desc .icon {
        width: 1.5em;
        height: 1.5em;
        margin-right: 0.5em;
      }
      .tab__body {
        padding-bottom: 1.5em;
        overflow-y: auto;
      }
      
      fieldset {
        border: solid 1px rgba(var(--color--fg), 0.5);
      }
      fieldset:not(:first-of-type) {
        margin-top: 1em;
      }
      
      legend {
        width: 100%;
        color: rgb(var(--color--bg));
        font-size: 1.2em;
        padding: 0.25em 0.5em;
        border-radius: 0.25em 0.25em 0 0;
        margin: 0;
        background: rgba(var(--color--fg), 0.5);
      }
      
      .item-row {
        width: 100%;
        display: flex;
      }
      .item-row * {
        padding: 0.5em;
        border: solid 1px rgba(var(--color--fg), 0.5);
        user-select: none;
      }
      .item-row__check {
        flex-shrink: 0;
      }
      .item-row__item {
        min-width: 30%;
      }
      .item-row__desc {
        width: 100%;
        color: rgba(var(--color--fg), 0.5);
      }
      
      .folder-tree {
        font-family: monospace;
        padding: 1em;
        border: solid 1px;
        margin: 0;
      }
      .folder-tree,
      .folder-tree ul {
        list-style: none;
      }
      .folder-tree ul {
        padding-left: 0;
      }
      .folder-tree label {
        height: 1.2em;
        font-size: 1.25em;
        line-height: 1em;
        display: flex;
        align-items: center;
        cursor: pointer;
      }
      .folder-tree label:hover {
        background: rgba(var(--color--fg), 0.1);
      }
      .folder-tree ul li label::before {
        content: attr(data-branch);
        white-space: pre;
        letter-spacing: -0.25em;
      }
      .folder-tree label input {
        margin-right: 0.75em;
      }
      
      .combo-box {
        font-size: 1.2em;
        padding: 0.25em 0.25em 0.25em 0.75em;
        border: solid 1px;
        display: flex;
        align-items: center;
      }
      .combo-box label {
        min-width: 20%;
      }
      .combo-box select {
        width: 100%;
      }
      
      .btm-nav {
        display: flex;
      }
      .btm-nav button {
        width: 100%;
        padding: 0.5em;
      }
    </style>
    
    <script>
      // icons from https://www.svgrepo.com/vectors/
      const guiData = [
        {
          label: 'Official',
          icon: 'package',
          id: 'official',
          desc: 'Choose official packages to install.',
          items: [
            ['checklist', {
              '3d': [
                [true, 'blender', 'Open-source 3D creation suite.'],
              ],
              'Audio Converter': [
                [true, 'soundkonverter', 'A GUI to convert various audio formats.'],
              ],
              'Audio Player': [
                [true, 'qmmp', 'Open-source Qt-based multimedia player (Winamp replacement).'],
              ],
              'Browsers': [
                [true, 'chromium', 'Open-source Browser (what Chrome is built on).'],
                [true, 'firefox', 'Open-source Browser (oveseen by Mozilla Corp.).'],
              ],
              'Development': [
                [true, 'diff-so-fancy', 'A CLI util for more readable diffs.'],
                [true, 'docker', 'A set of platform as a service products that use OS-level virtualization to deliver software in packages called containers.'],
                [true, 'docker-compose', 'A tool for defining and running multi-container Docker applications.'],
                [true, 'filezilla', 'Open-source, cross-platform FTP application that supports FTP, FTPS, and SFTP.'],
                [true, 'meld', 'A visual diff and merge tool targeted at developers.'],
                [true, 'notepadqq', 'A Notepad++-like editor for the Linux desktop.'],
                [true, 'tilix', 'A feature-rich tiling terminal emulator following the GNOME human interface design guidelines.'],
                [true, 'virtualbox', 'Open-source software for virtualizing the x86 computing architecture.'],
                [true, 'virtualbox-host-modules-arch', 'Virtualbox host kernel modules for Arch Kernel.'],
                [true, 'virtualbox-guest-iso', 'Provides mouse pointer integration, shared folders, better video support, seamless windows, generic host/guest communication channels, time synchronization, shared clipboards, and automated logins for Virtualbox.'],
                [true, 'zsh', 'Z shell is a Unix shell that can be used as an interactive login shell and as a command interpreter for shell scripting.'],
              ],
              'Gaming': [
                [true, 'discord', 'App that allows Users to communicate via voice/video calls, text messaging, media and files in private chats or as part of community servers.'],
                [true, 'steam', 'A video game digital distribution service by Valve.'],
              ],
              'Image': [
                [true, 'flameshot', 'Powerful yet simple to use screenshot software.'],
                [true, 'gimp', 'GNU Image Manipulation Program.'],
                [true, 'inkscape', 'Open-source vector graphics editor.'],
                [true, 'krita', 'App for image creation and image manipulation.'],
              ],
              'Packages': [
                [true, 'flatpak', 'Linux application sandboxing and distribution framework.'],
              ],
              'Utils': [
                [true, 'baobab', 'Disk Usage Analyzer, formerly known as Baobab, is a graphical disk usage analyzer for the GNOME desktop environment.'],
                [true, 'bat', 'CLI util that comes with syntax highlighting, git integration, and works as is a drop-in cat command replacement.'],
                [true, 'btop', 'CLI resource monitor that shows usage and stats for processor, memory, disks, network and processes.'],
                [true, 'filelight', 'App to visualize the disk usage on your computer.'],
                [true, 'fzf', 'CLI fuzzy finder.'],
                [true, 'gtk3-demos', "Brings in 'gtk3-icon-browser' which allows to easily search for icons."],
                [true, 'lsd', "(LSDeluxe) A rewrite of GNU 'ls' with a lot of added features like colors, icons, tree-view, and more formatting options."],
                [true, 'mc', '(Midnight Commander) A CLI based file manager.'],
                [true, 'p7zip', 'A CLI port of 7-Zip for POSIX systems.'],
                [true, 'speedtest-cli', 'CLI util to measure internet connection performance metrics like download, upload, latency and packet loss natively without relying on a web browser.'],
                [true, 'xclip', 'CLI util that copies text to a User\'s clipboard.'],
              ],
              'Video Player': [
                [true, 'vlc', 'Multimedia player that plays most multimedia files as well as DVDs, Audio CDs, VCDs, and various streaming protocols.'],
              ],
              'Video Production': [
                [true, 'audacity', 'Multi-track audio editor and recorder.'],
                [true, 'handbrake', 'A GUI for ffmpeg to allow easy video transcoding.'],
                [true, 'mkvtoolnix-gui', "A GUI for 'mkvmerge', 'mkvinfo', and 'mkvpropedit'."],
                [true, 'obs-studio', 'Open-source solution for game recording and live streaming.'],
                [true, 'peek', "App to capture specific parts of screen, and can output '.apng', '.gif', '.mp4', and '.webm'."],
              ],
              'Extras': [
                [false, 'figlet', 'A CLI tool that generates ASCII text banners in a variety of typefaces.'],
                [false, 'lolcat', "Adds rainbow colors to a command's output."],
                [false, 'neofetch', 'A CLI util that displays system information.'],
              ],
            }],
          ],
        },
        {
          label: 'AUR',
          icon: 'package-blue',
          id: 'aur',
          desc: 'Choose AUR packages to install.',
          items: [
            ['checklist', {
              'Browsers': [
                [true, 'google-chrome', "Google's Chrome Browser"],
              ],
              'Development': [
                [true, 'virtualbox-ext-oracle', "Determines and installs the proper 'virtualbox-host-modules' for your Linux kernel (otherwise you can just manually install the proper version yourself)."],
              ],
              'Music file manipulation': [
                [true, 'puddletag', 'Configurable tag editor for music files'],
              ],
              'Packages': [
                [true, 'pamac-all', 'A GUI that allows for searching, installing, and uninstalling official packages, AURs, Flatpaks, and Snaps.'],
              ],
              'System snapshots': [
                [true, 'timeshift', 'An App that provides functionality similar to System Restore on Windows, or Time Machine on Mac OS.'],
              ],
              'Utils': [
                [true, 'ascii-image-converter', 'A CLI tool that converts images into ASCII art.'],
                [true, 'p7zip-gui', 'A GUI for the 7zip file archiver.'],
                [true, 'qview', 'A lightweight image viewer designed with minimalism and practicality in mind.'],
              ],
              'Video Production': [
                [true, 'davinci-resolve', 'A proprietary video editor, color correction and compositing application.'],
                [true, 'subtitleedit', 'GUI editor for multiple subtitle formats.'],
              ],
              'Extras': [
                [false, 'cmatrix', 'A program that shows the Matrix scrolling lines in the terminal.'],
                [false, 'figlet-fonts', "Fonts used by 'figlet'."],
                [false, 'figlet-fonts-extra', "More fonts for 'figlet'."],
                [false, 'hollywood', 'A util that splits your console into a multiple panes of technobabble, perfectly suitable for any Hollywood geek melodrama.'],
                [false, 'shell-color-scripts', 'A collection of ASCII art scripts that display your current CLI colors.'],
              ],
            }],
          ],
        },
        {
          label: 'Flatpak',
          icon: 'package-pink',
          id: 'flat',
          desc: 'Choose Flatpak packages to install.',
          items: [
            ['checklist', {
              'Development': [
                [true, 'atom', 'Hackable IDE'],
              ],
              'Extras': [
                [false, 'bottles', 'A GUI to manage Wine and Proton software.'],
              ],
            }],
          ],
        },
        {
          label: 'Non-Standard',
          icon: 'nonstandard',
          id: 'nonstandard',
          desc: 'Choose items that don\'t have a standardized installation method.',
          items: [
            ['checklist', [
              [true, 'oh-my-zsh', 'Framework for managing ZSH configuration'],
            ]],
          ],
        },
        {
          label: 'Scripts',
          icon: 'toolbox',
          id: 'scripts',
          desc: 'Choose which User scripts to install.',
          items: [
            ['checklist', [
              [true, 'backup.sh', 'Util that allows a User to specify what folders/files to zip up and drop on the Desktop.'],
              [true, 'lan-shares.sh', 'Util to configure and un/mount Network shares.'],
              [true, 'user-script.sh', "Util that allows for 'un/installing' a script as a Launcher."],
            ]],
          ],
        },
        {
          label: 'Settings',
          icon: 'settings',
          id: 'settings',
          desc: 'Configure your Desktop.',
          items: [
            ['combo-box', {
              label: 'Cursors',
              id: 'cursors',
              options: [
                'Mac OS Big Sur:macOSBigSur;cursor-theme-macos-big-sur',
                'KDE Classic:KDE_Classic',
              ],
            }],
            ['combo-box', {
              label: 'Dock',
              id: 'dock',
              options: [
                'Cairo:cairo-dock cairo-dock-plug-ins cairo-dock-plug-ins-extra',
                'Plank:plank',
                'Latte:latte-dock',
              ],
            }],
            ['combo-box', {
              label: 'Theme',
              id: 'theme',
              options: [
                'Breeze:breeze',
              ],
            }],
            ['combo-box', {
              label: 'Wallpaper',
              id: 'wallpaper',
              options: [
                'Milky Way',
                'Shell',
                'Pastel Hills',
                'Elarun',
              ],
            }],
          ],
        },
        {
          label: 'Folders',
          icon: 'folders',
          id: 'folders',
          desc: 'Add common folders within your Home folder.',
          items: [
            ['folder-tree', [
              'Backups',
              ['Projects', [
                '3D',
                ['Code', [
                  'Apps',
                  'Scripts',
                ]],
                'Img',
                'Vid',
              ]],
              'Torrents',
              ['VirtualBox', [
                'ISOs',
                'Shares',
                'VMs',
              ]],
            ]],
          ],
        },
        {
          label: 'Hardware',
          icon: 'hardware',
          id: 'hardware',
          desc: 'If you have dedicated hardware, you may need to install these packages.',
          items: [
            ['radiolist', {
              'GPU:gpu': [
                [true, 'None (Integrated):'],
                [false, 'AMD:'],
                [false, 'Nvidia:nvidia nvidia-settings'],
              ],
            }],
          ],
        },
      ];
    </script>
  </head>
  <body>
    <svg style="display:none; position:absolute" width="0" height="0">
      <symbol id="ui__package" viewBox="0 0 460 460" xmlns="http://www.w3.org/2000/svg">
        <path style="fill: #fab466;" d="m200.002 210 30 250 200-115V115z"></path>
        <path style="fill: #e08f00;" d="M230.001 200v260l-200-115V115z"></path>
        <path style="fill: #f0b371;" d="m29.998 115 69.915 40.199 132.46-38.919 67.534-76.087L229.998 0z"></path>
        <path style="fill: #f0b371;" d="M160.096 189.804 229.998 230l200-115-69.9-40.202-133.441 39.481z"></path>
        <path style="fill: #e6be96;" d="m160.096 289.803-60.183-34.604v-100l58.011 4.531 2.172 30.074z"></path>
        <path style="fill: #f8c976;" d="M99.913 155.199 299.907 40.193l60.191 34.605-200.002 115.006z"></path>
      </symbol>
      <symbol id="ui__package-blue" viewBox="0 0 460 460" xmlns="http://www.w3.org/2000/svg">
        <path style="fill: #66b6fa;" d="m200.002 210 30 250 200-115V115z"></path>
        <path style="fill: #007ae0;" d="M230.001 200v260l-200-115V115z"></path>
        <path style="fill: #71a4f0;" d="m29.998 115 69.915 40.199 132.46-38.919 67.534-76.087L229.998 0z"></path>
        <path style="fill: #71a4f0;" d="M160.096 189.804 229.998 230l200-115-69.9-40.202-133.441 39.481z"></path>
        <path style="fill: #96bee6;" d="m160.096 289.803-60.183-34.604v-100l58.011 4.531 2.172 30.074z"></path>
        <path style="fill: #76c9f8;" d="M99.913 155.199 299.907 40.193l60.191 34.605-200.002 115.006z"></path>
      </symbol>
      <symbol id="ui__package-pink" viewBox="0 0 460 460" xmlns="http://www.w3.org/2000/svg">
        <path style="fill: #fa66ef;" d="m200.002 210 30 250 200-115V115z"></path>
        <path style="fill: #e000d0;" d="M230.001 200v260l-200-115V115z"></path>
        <path style="fill: #f071e7;" d="m29.998 115 69.915 40.199 132.46-38.919 67.534-76.087L229.998 0z"></path>
        <path style="fill: #f071e7;" d="M160.096 189.804 229.998 230l200-115-69.9-40.202-133.441 39.481z"></path>
        <path style="fill: #e196e6;" d="m160.096 289.803-60.183-34.604v-100l58.011 4.531 2.172 30.074z"></path>
        <path style="fill: #e6aae2;" d="M99.913 155.199 299.907 40.193l60.191 34.605-200.002 115.006z"></path>
      </symbol>
      <symbol id="ui__toolbox" viewBox="0 0 512 512" xmlns="http://www.w3.org/2000/svg">
        <path style="fill:#2969b0" d="M11.77 281.823h488.46v64.736H11.77z"/>
        <path style="fill:#bfdeff" d="M44.138 346.559h423.724V499.57H44.138z"/>
        <path style="fill:#ebebeb" d="M203.034 346.559h105.931v52.966H203.034z"/>
        <path style="fill:#a8a8a8" d="M463.439 179.715 288.455 78.689c12.751-22.085 25.501-44.171 38.253-66.256 61.094 26.728 110.93 79.308 157.329 131.606-6.866 11.893-13.731 23.785-20.598 35.676z"/>
        <path style="fill:#ffac3d" d="m389.202 136.849-43.773 75.811-39.924 69.161h-67.961l15.996-27.695 84.698-146.703z"/>
        <path style="fill:#ebebeb" d="m253.54 254.126-15.996 27.695h-22.116l-91.901-136.239-17.184-9.71L76.506 91.64l53.66-36.194 29.837 44.233 2.554 19.573zm160.38-41.466v69.161H305.505l39.924-69.161z"/>
        <path style="fill:#231f20" d="M500.23 270.051h-74.54V212.66c0-6.501-5.271-11.77-11.77-11.77h-48.1l27.688-47.959 64.046 36.977a11.758 11.758 0 0 0 8.931 1.176 11.768 11.768 0 0 0 7.147-5.484l20.598-35.678a11.769 11.769 0 0 0-1.389-13.696C445.913 83.333 394.793 29.371 331.424 1.649a11.77 11.77 0 0 0-14.91 4.899l-38.253 66.256c-3.251 5.63-1.322 12.828 4.308 16.078l39.586 22.855-69.394 120.189-78.893-116.953-2.194-16.818a11.772 11.772 0 0 0-1.914-5.059l-29.837-44.232c-3.636-5.39-10.952-6.81-16.339-3.176l-53.66 36.193a11.771 11.771 0 0 0-3.177 16.34l29.837 44.232a11.775 11.775 0 0 0 3.968 3.665l14.769 8.345 77.97 115.587H147.67l-46.458-95.485c-2.845-5.845-9.89-8.277-15.733-5.434-5.845 2.845-8.278 9.888-5.434 15.733l41.447 85.186h-29.78l-18.556-42.205c-2.618-5.951-9.566-8.653-15.512-6.037-5.951 2.617-8.655 9.561-6.038 15.512l14.39 32.732H11.77c-6.499 0-11.77 5.27-11.77 11.77v64.736c0 6.501 5.271 11.77 11.77 11.77h20.598v141.241c0 6.501 5.271 11.77 11.77 11.77h423.724c6.499 0 11.77-5.269 11.77-11.77V358.328h20.598c6.499 0 11.77-5.269 11.77-11.77v-64.736c0-6.502-5.271-11.771-11.77-11.771zm-98.08-45.621v45.621h-76.259l26.338-45.621h49.921zM331.515 27.647c52.385 25.827 96.918 71.78 138.08 117.868l-10.464 18.122-154.598-89.256 26.982-46.734zm41.607 113.514-74.412 128.89h-40.774l5.798-10.038c.005-.008.007-.016.012-.025l78.799-136.482 30.577 17.655zM133.285 139a11.775 11.775 0 0 0-3.968-3.665l-14.769-8.345-21.702-32.175 34.144-23.029 21.702 32.171 2.194 16.818a11.772 11.772 0 0 0 1.914 5.059l86.868 128.772-8.917 15.444h-9.063L133.285 139zm322.807 299.952h-48.846c-6.499 0-11.77 5.269-11.77 11.77 0 6.501 5.271 11.77 11.77 11.77h48.846v25.306H55.908v-25.306h48.846c6.499 0 11.77-5.269 11.77-11.77 0-6.501-5.271-11.77-11.77-11.77H55.908v-80.625h135.356v41.195c0 6.501 5.271 11.77 11.77 11.77h105.931c6.499 0 11.77-5.269 11.77-11.77v-41.195h135.356v80.625zm-241.287-80.625h82.391v29.425h-82.391v-29.425zm273.655-23.54H23.54v-41.195h464.92v41.195z"/>
        <path style="fill:#231f20" d="M149.677 438.952H148.5c-6.499 0-11.77 5.269-11.77 11.77 0 6.501 5.271 11.77 11.77 11.77h1.177c6.499 0 11.77-5.269 11.77-11.77 0-6.5-5.271-11.77-11.77-11.77zm212.646 23.54h1.177c6.499 0 11.77-5.269 11.77-11.77 0-6.501-5.271-11.77-11.77-11.77h-1.177c-6.499 0-11.77 5.269-11.77 11.77 0 6.501 5.271 11.77 11.77 11.77z"/>
      </symbol>
      <symbol id="ui__settings" viewBox="0 0 480 480" xmlns="http://www.w3.org/2000/svg">
        <path style="fill:#829996" d="M52 337.2c0 9.6-8 17.6-17.6 17.6-9.6 0-17.6-8-17.6-17.6V32.4c0-9.6 8-17.6 17.6-17.6 9.6 0 17.6 8 17.6 17.6v304.8z"/>
        <path style="fill:#b2ccca" d="M52 323.6c0 9.6-8 17.6-17.6 17.6-9.6 0-17.6-8-17.6-17.6V18.8c.8-9.6 8-17.6 17.6-17.6C44 1.2 52 9.2 52 18.8v304.8z"/>
        <path style="fill:#9ab2b0" d="M34.4 1.2C44 1.2 52 9.2 52 18.8v304.8c0 9.6-8 17.6-17.6 17.6"/>
        <path style="fill:#566366" d="M34.4 121.2c15.2 0 27.2 12 28 26.4V146c0-16-12.8-28.8-28.8-28.8S4.8 130 4.8 146v1.6c2.4-15.2 15.2-26.4 29.6-26.4z"/>
        <circle style="fill:#121c1b" cx="34.4" cy="147.6" r="28.8"/>
        <circle style="opacity:.1;fill:#121c1b;enable-background:new" cx="34.4" cy="155.6" r="28.8"/>
        <path style="fill:#283538" d="M14.4 167.6c-11.2-11.2-11.2-28.8 0-40s28.8-11.2 40 0"/>
        <path style="fill:#829996" d="M148.8 337.2c0 9.6-8 17.6-17.6 17.6-9.6 0-17.6-8-17.6-17.6V32.4c0-9.6 8-17.6 17.6-17.6 9.6 0 17.6 8 17.6 17.6v304.8z"/>
        <path style="fill:#b2ccca" d="M148.8 323.6c0 9.6-8 17.6-17.6 17.6-9.6 0-17.6-8-17.6-17.6V18.8c0-9.6 8-17.6 17.6-17.6 9.6 0 17.6 8 17.6 17.6v304.8z"/>
        <path style="fill:#9ab2b0" d="M132 1.2c9.6 0 17.6 8 17.6 17.6v304.8c0 9.6-8 17.6-17.6 17.6"/>
        <path style="fill:#566366" d="M132 210c15.2 0 27.2 12 28 26.4v-1.6c0-16-12.8-28.8-28.8-28.8s-28.8 12.8-28.8 28.8v1.6C104 222 116.8 210 132 210z"/>
        <circle style="fill:#121c1b" cx="132" cy="237.2" r="28.8"/>
        <circle style="opacity:.1;fill:#121c1b;enable-background:new" cx="132" cy="245.2" r="28.8"/>
        <path style="fill:#283538" d="M111.2 257.2c-11.2-11.2-11.2-28.8 0-40s28.8-11.2 40 0"/>
        <path style="fill:#829996" d="M245.6 337.2c0 9.6-8 17.6-17.6 17.6-9.6 0-17.6-8-17.6-17.6V32.4c0-9.6 8-17.6 17.6-17.6 9.6 0 17.6 8 17.6 17.6v304.8z"/>
        <path style="fill:#b2ccca" d="M245.6 323.6c0 9.6-8 17.6-17.6 17.6-9.6 0-17.6-8-17.6-17.6V18.8c0-9.6 8-17.6 17.6-17.6 9.6 0 17.6 8 17.6 17.6v304.8z"/>
        <path style="fill:#9ab2b0" d="M228.8 1.2c9.6 0 17.6 8 17.6 17.6v304.8c0 9.6-8 17.6-17.6 17.6"/>
        <path style="fill:#566366" d="M228.8 234.8c15.2 0 27.2 12 28 26.4v-1.6c0-16-12.8-28.8-28.8-28.8s-28.8 12.8-28.8 28.8v1.6c2.4-14.4 14.4-26.4 29.6-26.4z"/>
        <circle style="fill:#121c1b" cx="228.8" cy="262" r="28.8"/>
        <circle style="opacity:.1;fill:#121c1b;enable-background:new" cx="228.8" cy="270" r="28.8"/>
        <path style="fill:#283538" d="M208.8 282c-11.2-11.2-11.2-28.8 0-40s28.8-11.2 40 0"/>
        <path style="fill:#829996" d="M342.4 337.2c0 9.6-8 17.6-17.6 17.6-9.6 0-17.6-8-17.6-17.6V32.4c0-9.6 8-17.6 17.6-17.6 9.6 0 17.6 8 17.6 17.6v304.8z"/>
        <path style="fill:#b2ccca" d="M342.4 323.6c0 9.6-8 17.6-17.6 17.6-9.6 0-17.6-8-17.6-17.6V18.8c0-9.6 8-17.6 17.6-17.6 9.6 0 17.6 8 17.6 17.6v304.8z"/>
        <path style="fill:#9ab2b0" d="M325.6 1.2c9.6 0 17.6 8 17.6 17.6v304.8c0 9.6-8 17.6-17.6 17.6"/>
        <path style="fill:#566366" d="M325.6 121.2c15.2 0 27.2 12 28 26.4V146c0-16-12.8-28.8-28.8-28.8S296 130 296 146v1.6c2.4-15.2 14.4-26.4 29.6-26.4z"/>
        <circle style="fill:#121c1b" cx="325.6" cy="147.6" r="28.8"/>
        <circle style="opacity:.1;fill:#121c1b;enable-background:new" cx="325.6" cy="155.6" r="28.8"/>
        <path style="fill:#283538" d="M305.6 167.6c-11.2-11.2-11.2-28.8 0-40s28.8-11.2 40 0"/>
        <path style="fill:#566366" d="M432.8 374c24.8 0 44.8 19.2 46.4 43.2V414c0-25.6-20.8-47.2-47.2-47.2-25.6 0-47.2 20.8-47.2 47.2v3.2c3.2-24 24-43.2 48-43.2z"/>
        <circle style="fill:#121c1b" cx="432.8" cy="417.2" r="47.2"/>
        <circle style="opacity:.1;fill:#121c1b;enable-background:new" cx="432.8" cy="431.6" r="47.2"/>
        <path style="fill:#283538" d="M400 450.8c-18.4-18.4-18.4-48 0-66.4s48-18.4 66.4 0"/>
        <path style="fill:#13eaea" d="M414.4 403.6c0 4-3.2 7.2-7.2 7.2s-7.2-3.2-7.2-7.2 3.2-7.2 7.2-7.2 7.2 3.2 7.2 7.2zm52-86.4c0 8.8-7.2 16-16 16H416c-8.8 0-16-7.2-16-16v-300c0-8.8 7.2-16 16-16h35.2c8.8 0 16 7.2 16 16v300h-.8z"/>
        <path style="fill:#1ec6c1" d="M450.4 1.2H416c-8.8 0-16 7.2-16 16v21.6c0-8.8 7.2-16 16-16h35.2c8.8 0 16 7.2 16 16V17.2c-.8-8.8-8-16-16.8-16z"/>
        <path style="opacity:.1;fill:#121c1b;enable-background:new" d="M69.6 443.6c0 12-9.6 21.6-21.6 21.6H21.6c-12 0-21.6-9.6-21.6-21.6v-26.4c0-12 9.6-21.6 21.6-21.6H48c12 0 21.6 9.6 21.6 21.6v26.4z"/>
        <path style="fill:#9ab2b0" d="M69.6 425.2c0 12-9.6 21.6-21.6 21.6H21.6c-12 0-21.6-9.6-21.6-21.6v-25.6c0-12.8 9.6-22.4 21.6-22.4H48c12 0 21.6 9.6 21.6 21.6v26.4z"/>
        <path style="fill:#8ba3a0" d="M21.6 377.2H48c12 0 21.6 9.6 21.6 21.6v26.4c0 12-9.6 21.6-21.6 21.6"/>
        <path style="opacity:.1;fill:#121c1b;enable-background:new" d="M166.4 443.6c0 12-9.6 21.6-21.6 21.6h-25.6c-12 0-21.6-9.6-21.6-21.6v-26.4c0-12 9.6-21.6 21.6-21.6h25.6c12 0 21.6 9.6 21.6 21.6v26.4z"/>
        <path style="fill:#9ab2b0" d="M166.4 425.2c0 12-9.6 21.6-21.6 21.6h-25.6c-12 0-21.6-9.6-21.6-21.6v-25.6c0-12 9.6-21.6 21.6-21.6h25.6c12 0 21.6 9.6 21.6 21.6v25.6z"/>
        <path style="fill:#8ba3a0" d="M118.4 377.2H144c12 0 21.6 9.6 21.6 21.6v26.4c0 12-9.6 21.6-21.6 21.6"/>
        <path style="opacity:.1;fill:#121c1b;enable-background:new" d="M263.2 443.6c0 12-9.6 21.6-21.6 21.6H216c-12 0-21.6-9.6-21.6-21.6v-26.4c0-12 9.6-21.6 21.6-21.6h25.6c12 0 21.6 9.6 21.6 21.6v26.4z"/>
        <path style="fill:#9ab2b0" d="M263.2 425.2c0 12-9.6 21.6-21.6 21.6H216c-12 0-21.6-9.6-21.6-21.6v-25.6c0-12 9.6-21.6 21.6-21.6h25.6c12 0 21.6 9.6 21.6 21.6v25.6z"/>
        <path style="fill:#8ba3a0" d="M215.2 377.2h25.6c12 0 21.6 9.6 21.6 21.6v26.4c0 12-9.6 21.6-21.6 21.6"/>
        <path style="opacity:.1;fill:#121c1b;enable-background:new" d="M360 443.6c0 12-9.6 21.6-21.6 21.6h-25.6c-12 0-21.6-9.6-21.6-21.6v-26.4c0-12 9.6-21.6 21.6-21.6h25.6c12 0 21.6 9.6 21.6 21.6v26.4z"/>
        <path style="fill:#ff7a17" d="M360 425.2c0 12-9.6 21.6-21.6 21.6h-25.6c-12 0-21.6-9.6-21.6-21.6v-25.6c0-12 9.6-21.6 21.6-21.6h25.6c12 0 21.6 9.6 21.6 21.6v25.6z"/>
        <path style="fill:#f74d19" d="M312.8 377.2h25.6c12 0 21.6 9.6 21.6 21.6v26.4c0 12-9.6 21.6-21.6 21.6"/>
        <path style="fill:#20b1c4" d="M456.8 294.8c0 3.2-2.4 6.4-6.4 6.4h-36c-3.2 0-6.4-2.4-6.4-6.4 0-3.2 2.4-6.4 6.4-6.4h36c4 .8 6.4 3.2 6.4 6.4zm0-20.8c0 3.2-2.4 6.4-6.4 6.4h-36c-3.2 0-6.4-2.4-6.4-6.4 0-3.2 2.4-6.4 6.4-6.4h36c4 0 6.4 2.4 6.4 6.4zm0-21.6c0 3.2-2.4 6.4-6.4 6.4h-36c-3.2 0-6.4-2.4-6.4-6.4 0-3.2 2.4-6.4 6.4-6.4h36c4 0 6.4 2.4 6.4 6.4zm0-21.6c0 3.2-2.4 6.4-6.4 6.4h-36c-3.2 0-6.4-2.4-6.4-6.4 0-3.2 2.4-6.4 6.4-6.4h36c4 0 6.4 2.4 6.4 6.4zm0-21.6c0 3.2-2.4 6.4-6.4 6.4h-36c-3.2 0-6.4-2.4-6.4-6.4 0-3.2 2.4-6.4 6.4-6.4h36c4 0 6.4 2.4 6.4 6.4zm0-21.6c0 3.2-2.4 6.4-6.4 6.4h-36c-3.2 0-6.4-2.4-6.4-6.4 0-3.2 2.4-6.4 6.4-6.4h36c4 0 6.4 3.2 6.4 6.4zm0-21.6c0 3.2-2.4 6.4-6.4 6.4h-36c-3.2 0-6.4-2.4-6.4-6.4 0-3.2 2.4-6.4 6.4-6.4h36c4 0 6.4 3.2 6.4 6.4zm0-21.6c0 3.2-2.4 6.4-6.4 6.4h-36c-3.2 0-6.4-2.4-6.4-6.4 0-3.2 2.4-6.4 6.4-6.4h36c4 0 6.4 3.2 6.4 6.4zm0-21.6c0 3.2-2.4 6.4-6.4 6.4h-36c-3.2 0-6.4-2.4-6.4-6.4 0-3.2 2.4-6.4 6.4-6.4h36c4 0 6.4 3.2 6.4 6.4zm0-21.6c0 3.2-2.4 6.4-6.4 6.4h-36c-3.2 0-6.4-2.4-6.4-6.4 0-3.2 2.4-6.4 6.4-6.4h36c4 0 6.4 3.2 6.4 6.4z"/>
        <path style="fill:#ff7a17" d="M456.8 79.6c0 3.2-2.4 6.4-6.4 6.4h-36c-3.2 0-6.4-2.4-6.4-6.4 0-3.2 2.4-6.4 6.4-6.4h36c4 0 6.4 3.2 6.4 6.4zm0-21.6c0 3.2-2.4 6.4-6.4 6.4h-36c-3.2 0-6.4-2.4-6.4-6.4 0-3.2 2.4-6.4 6.4-6.4h36c4 0 6.4 3.2 6.4 6.4zm0-21.6c0 3.2-2.4 6.4-6.4 6.4h-36c-3.2 0-6.4-2.4-6.4-6.4 0-3.2 2.4-6.4 6.4-6.4h36c4 0 6.4 3.2 6.4 6.4z"/>
      </symbol>
      <symbol id="ui__folders" viewBox="0 0 496 496" xmlns="http://www.w3.org/2000/svg">
        <path style="fill:#c18205" d="M408 39.6H241.6c-4.8 0-9.6 1.6-16 9.6l-8 14.4H20.8C9.6 63.6 0 72.4 0 84.4v264c0 11.2 9.6 19.2 20.8 19.2H396c11.2 0 20-8 20-19.2V50c0-4.8-3.2-10.4-8-10.4z"/>
        <path style="fill:#aa6e04" d="M408 313.2c5.6-4 8-9.6 8-16.8V50c0-4.8-3.2-10.4-8-10.4H241.6c-4.8 0-9.6 1.6-16 9.6l-8 14.4H20.8C10.4 63.6 1.6 71.6 0 82l408 231.2z"/>
        <path style="fill:#915a02" d="m10.4 87.6 397.6 224c5.6-4 8-8 8-15.2V106l-24.8-18.4H10.4z"/>
        <path style="fill:#fff" d="M32 87.6h352v256H32z"/>
        <path style="fill:#efefef" d="M216 87.6h168v256H216z"/>
        <path style="fill:#ffb000" d="M416.8 356.4c0 11.2-9.6 19.2-20.8 19.2H20.8c-11.2 0-20.8-8-20.8-19.2l6.4-209.6c0-12 9.6-19.2 20.8-19.2h362.4c11.2 0 20.8 7.2 20.8 19.2l6.4 209.6z"/>
        <path style="fill:#ffc200" d="M414.4 366.8 8.8 138c-.8 2.4-2.4 5.6-2.4 8L0 356.4c0 11.2 9.6 19.2 20.8 19.2H396c8 0 14.4-2.4 18.4-8.8z"/>
        <path style="fill:#ff9700" d="M487.2 127.6H440v240.8c0 26.4-5.6 31.2-21.6 31.2H96v25.6c0 .8.8 1.6.8 2.4v8c0 11.2 8.8 20.8 20 20.8H476c16 0 20-13.6 20-20.8V426c0-.8 0 .8 0 0V139.6c0-4.8-4-12-8.8-12z"/>
        <path style="fill:#ffb000" d="M294.4 399.6H96v25.6c0 .8 0-.8 0 0v16c0 11.2 9.6 14.4 20.8 14.4H396l-101.6-56z"/>
      </symbol>
      <symbol id="ui__hardware" viewBox="0 0 60 60" xmlns="http://www.w3.org/2000/svg">
        <g transform="translate(2 6)" stroke="#314E55" stroke-width="2" fill="none" fill-rule="evenodd">
          <path d="M0 .953h6v47.094" stroke="#848484" />
          <path d="M11 6H6v31h4v4h45V6H11Z" fill="#57ae57"/>
          <rect fill="#E4AD40" x="11" y="11" width="12" height="5" rx="2"/>
          <rect fill="#E4AD40" x="11" y="20" width="12" height="5" rx="2"/>
          <path fill="#c4c4c4" d="M32 16h14v13H32z"/>
          <path d="M32 18h-2m2 3h-2m2 3h-2m2 3h-2m18-9h-2m2 3h-2m2 3h-2m2 3h-2" stroke-linecap="square"/>
          <circle stroke-linecap="square" cx="21" cy="36" r="1"/>
          <circle stroke-linecap="square" cx="27" cy="36" r="1"/>
          <circle stroke-linecap="square" cx="46" cy="36" r="1"/>
          <path stroke-linecap="square" fill="#F28544" d="M2 13h4v10H2z"/>
        </g>
      </symbol>
      <symbol id="ui__nonstandard" viewBox="0 0 208 191.941" xmlns="http://www.w3.org/2000/svg">
        <path fill="#1C71DA" d="M104.691 127.731h-.562l.281.281z"/>
        <path fill="#5CB0FF" d="M184 167.941H24v-28H8v44h192v-44h-16z"/>
        <path fill="#1C71DA" d="M176 131.941v28H32v-28H0v60h208v-60h-32zm24 52H8v-44h16v28h160v-28h16v44z"/>
        <path fill="#1C71DA" d="M101.582 136.496c.781.781 1.805 1.172 2.828 1.172s2.047-.39 2.828-1.172l26.485-26.484a3.999 3.999 0 1 0-5.656-5.656L108 124.422V19.942h-8v103.66l-20.066-20.067a4 4 0 0 0-5.657 5.656l27.305 27.305zm3.11-8.766-.282.282-.281-.281h.562z"/>
        <path fill="#FF5D5D" d="M138.11 94.14a3.998 3.998 0 0 1-2.828-6.828l14.142-14.142a3.998 3.998 0 0 1 5.656 0 3.998 3.998 0 0 1 0 5.656L140.94 92.97a3.985 3.985 0 0 1-2.829 1.172z"/>
        <path fill="#FF5D5D" d="M152.252 94.14a3.985 3.985 0 0 1-2.828-1.172l-14.142-14.142a3.998 3.998 0 0 1 0-5.656 3.998 3.998 0 0 1 5.656 0l14.142 14.142a3.998 3.998 0 0 1-2.828 6.828z"/>
        <path fill="#00D40B" d="M182.252 28c-7.72 0-14-6.28-14-14s6.28-14 14-14 14 6.28 14 14-6.28 14-14 14zm0-20c-3.309 0-6 2.691-6 6s2.691 6 6 6 6-2.691 6-6-2.692-6-6-6z"/>
        <path fill="#FFC504" d="M38.455 38.39a3.987 3.987 0 0 1-2.828-1.172L24.312 25.904a4 4 0 0 1 0-5.656L35.627 8.934a4 4 0 0 1 5.656 0l11.314 11.314a3.998 3.998 0 0 1 0 5.656L41.283 37.218a3.986 3.986 0 0 1-2.828 1.172zm-5.657-15.314 5.657 5.657 5.657-5.657-5.657-5.657-5.657 5.657z"/>
      </symbol>
    </svg>
    
    <form>
      <div class="tabs">
        <nav class="tabs-nav"></nav>
      </div>
      <nav class="btm-nav">
        <button type="button" data-type="cancel">Cancel</button>
        <button type="button" data-type="save">Save</button>
      </nav>
    </form>
    
    <script>
      try {
        const form = document.querySelector('form');
        const tabsEl = form.querySelector('.tabs');
        const tabsNav = form.querySelector('.tabs-nav');
        
        function sendToStdOut(output) {
          console.log(`\n${output}`);
        }
        
        const svgIcon = (iconName) => `
          <svg class="icon">
            <use xlink:href="#ui__${iconName}" xmlns:xlink="http://www.w3.org/1999/xlink"></use>
          </svg>
        `;
        
        const transformFormData = () => {
          const fD = new FormData(form);
          const officalPkgs = [];
          const aurPkgs = [];
          const flatPkgs = [];
          const nonStandardItems = [];
          const userScripts = [];
          const folders = [];
          const hardwareSteps = [];
          const output = [];
          let theme;
          let cursorTheme;
          
          [...fD.values()].forEach((rawVal, ndx) => {
            const [tab, val] = rawVal.split('|');
            const [tabKey, itemKey] = tab.split(':');
            
            switch (tabKey) {
              case 'official': officalPkgs.push(val); break;
              case 'aur': aurPkgs.push(val); break;
              case 'flat': flatPkgs.push(val); break;
              case 'nonstandard': nonStandardItems.push(val); break;
              case 'scripts': userScripts.push(val); break;
              case 'settings': {
                switch (itemKey) {
                  case 'cursors': {
                    const c = val.split(';');
                    cursorTheme = c[0];
                    const cursorPkgs = c[1];
                    if (cursorPkgs) aurPkgs.push(cursorPkgs);
                    break;
                  }
                  case 'dock': officalPkgs.push(val); break;
                  case 'theme': {
                    theme = val;
                    break;
                  }
                  case 'wallpaper': {
                    break;
                  }
                }
                
                break;
              }
              case 'folders': folders.push(val); break;
              case 'hardware': {
                switch (itemKey) {
                  case 'gpu': {
                    officalPkgs.push(val);
                    
                    if (val.includes('nvidia')) {
                      const HOOKS_DIR = '/etc/pacman.d/hooks';
                      hardwareSteps.push(
                        '# Add pacman hook to compile module on kernel upgrades',
                        `sudo mkdir -p "${HOOKS_DIR}"`,
                        `sudo cp "\${PWD}/../hooks/nvidia.hook" "${HOOKS_DIR}/"`,
                        '',
                        '# Blacklist the Nouveau driver (the default open-source driver)',
                        'sudo bash -c "echo blacklist nouveau > /etc/modprobe.d/blacklist-nvidia-nouveau.conf"',
                        '',
                        '# Add GPU config for XOrg Server',
                        'sudo cp "\${PWD}/../confs/20-nvidia.conf" "/etc/X11/xorg.conf.d/"',
                        '',
                        '# Load driver on boot',
                        'sudo sed -i "/^MODULES=(/s/)$/ nvidia nvidia_modeset nvidia_uvm nvidia_drm)/" /etc/mkinitcpio.conf',
                        'sudo mkinitcpio -P linux',
                      );
                    }
                    
                    break;
                  }
                }
                
                break;
              }
            }
          });
          
          if (officalPkgs.length) {
            output.push(
              'echo " ╭───────────────────╮ "',
              'echo " │ Official Packages │ "',
              'echo " ╰───────────────────╯ "',
              '# update all installed packages (including kernel)',
              'sudo pacman -Syu',
              '# install packages',
              `sudo pacman -S --noconfirm --needed ${officalPkgs.sort().join(' ')}`,
              '',
            );
          }
          
          if (aurPkgs.length) {
            output.push(
              'echo " ╭──────────────╮ "',
              'echo " │ AUR Packages │ "',
              'echo " ╰──────────────╯ "',
              `yay -S --noredownload ${aurPkgs.sort().join(' ')}`,
              '',
            );
          }
          
          if (flatPkgs.length) {
            output.push(
              'echo " ╭──────────╮ "',
              'echo " │ Flatpack │ "',
              'echo " ╰──────────╯ "',
              `flatpak install --assumeyes flathub ${flatPkgs.sort().join(' ')}`,
              '',
            );
          }
          
          if (userScripts.length) {
            output.push(
              'echo " ╭──────────────╮ "',
              'echo " │ User Scripts │ "',
              'echo " ╰──────────────╯ "',
            );
            userScripts.forEach((script) => {
              output.push(`"\${REPO_BIN}/dist/user-script.sh" --install "\${REPO_BIN}/dist/${script}"`);
            });
            output.push('');
          }
          
          if (folders.length) {
            output.push(
              'echo " ╭────────────────╮ "',
              'echo " │ Common Folders │ "',
              'echo " ╰────────────────╯ "',
            );
            output.push(
              `mkdir -p ${folders.map(folder => `"${folder}"`).join(' ')}`,
              '',
            );
            
            for (let i=0; i<folders.length; i++) {
              const currFolder = folders[i];
              if (currFolder.includes('Code/Scripts')) {
                output.push(
                  `cp -r "\${REPO_PATH}" "${currFolder}/"`,
                  '',
                );
                
                break;
              }
            }
          }
          
          if (hardwareSteps.length) {
            output.push(...hardwareSteps, '');
          }
          
          if (theme) {
            const themeOpts = [`Current=${theme}`];
            if (cursorTheme) themeOpts.push(`CursorTheme=${cursorTheme}`);
            
            output.push(
              'echo " ╭──────────────╮ "',
              'echo " │ Login Screen │ "',
              'echo " ╰──────────────╯ "',
              '# NOTE: Might be too heavy-handed (not accounting for existing groups/settings).',
              'sudo tee -a "/etc/sddm.conf.d/kde_settings.conf" > /dev/null <<EOT',
              '[General]',
              'Numlock=on',
              '',
              '[Theme]',
              ...themeOpts,
              'EOT',
              '',
            );
          }
          
          if (cursorTheme) {
            output.push(
              'echo " ╭──────────────╮ "',
              'echo " │ Cursor Theme │ "',
              'echo " ╰──────────────╯ "',
              `sed -i -E 's/cursorTheme=.*/cursorTheme=${cursorTheme}/' \${HOME}/.config/kcminputrc`,
              '',
            );
          }
          
          let rcFile = '${HOME}/.bashrc';
          if (nonStandardItems.length) {
            nonStandardItems.forEach((item) => {
              switch (item) {
                case 'oh-my-zsh': {
                  rcFile = '${HOME}/.zshrc';
                  output.push(
                    'echo " ╭───────────╮ "',
                    'echo " │ Oh My ZSH │ "',
                    'echo " ╰───────────╯ "',
                    '# Install',
                    'sh -c "$(wget -O- https://raw.githubusercontent.com/ohmyzsh/ohmyzsh/master/tools/install.sh)"',
                    'DEFAULT__ZSH_CUSTOM="${HOME}/.oh-my-zsh/custom"',
                    'ZSH_THEME_PATH="${ZSH_CUSTOM:-DEFAULT__ZSH_CUSTOM}/themes/zsh-theme-boom"',
                    '# Add external plugins',
                    'git clone https://github.com/zsh-users/zsh-autosuggestions ${ZSH_CUSTOM:-DEFAULT__ZSH_CUSTOM}/plugins/zsh-autosuggestions',
                    'git clone https://github.com/zsh-users/zsh-syntax-highlighting.git ${ZSH_CUSTOM:-DEFAULT__ZSH_CUSTOM}/plugins/zsh-syntax-highlighting',
                    `sed '/plugins=(/,/)/c\plugins=(\n  zsh-autosuggestions\n  zsh-syntax-highlighting\n)' "${rcFile}"`,
                    '# Add my theme',
                    '( \\',
                    '  git clone https://github.com/the0neWhoKnocks/zsh-theme-boom.git ${ZSH_THEME_PATH} \\',
                    '  && cd ${ZSH_THEME_PATH} \\',
                    '  && git remote set-url origin git@github.com:the0neWhoKnocks/zsh-theme-boom.git \\',
                    '  && git checkout linux \\',
                    `  && sed -i -E \'s|ZSH_THEME=".*"|ZSH_THEME="zsh-theme-boom/skin"|\' "${rcFile}" \\`,
                    '  && sudo cp "${ZSH_THEME_PATH}/fonts/Fantasque Sans Mono Regular Nerd Font Complete Mono Windows Compatible.ttf" /usr/share/fonts/TTF/ \\',
                    '  && fc-cache -vf \\',
                    ')',
                    'neoFetchPatch=\'export SHELL="zsh" # fix for neofetch displaying incorrect Shell\'',
                    `sed -i "1s|^|\${neoFetchPatch}|" "${rcFile}"`,
                    '',
                  );
                  break;
                }
              }
            });
          }
          
          output.push(
            'echo " ╭────────────────╮ "',
            'echo " │ Custom Scripts │ "',
            'echo " ╰────────────────╯ "',
            '( \\',
            '  git clone https://github.com/the0neWhoKnocks/shell-scripts.git ~/sh \\',
            '  && cd ~/sh \\',
            '  && git remote set-url origin git@github.com:the0neWhoKnocks/shell-scripts.git \\',
            ')',
            `printf "\\nsource ~/sh/git-functions.sh\\n" >> "${rcFile}"`,
            '',
          );
          
          output.push(
            'echo " ╭─────────────╮ "',
            'echo " │ Git Aliases │ "',
            'echo " ╰─────────────╯ "',
            "git config --global alias.co 'checkout'",
            '',
          );
          
          if (officalPkgs.includes('cairo-dock')) {
            output.push(
              'echo " ╭────────────────╮ "',
              'echo " │ Cairo Dock fix │ "',
              'echo " ╰────────────────╯ "',
              "# There's a bug where it doesn't pick up v5 of KDE, so plugins like the folders plugin ",
              "# don't fully work. You can fix the issue with",
              'sudo ln -s /usr/bin/kioclient5 /usr/bin/kioclient',
              '',
            );
          }
          
          if (officalPkgs.includes('fzf')) {
            output.push(
              'echo " ╭──────────────╮ "',
              'echo " │ fzf defaults │ "',
              'echo " ╰──────────────╯ "',
              `printf "\\nexport FZF_DEFAULT_OPTS='--height 50% --border'\\n" >> "${rcFile}"`,
              '',
            );
          }
          
          if (officalPkgs.includes('tilix')) {
            output.push(
              'echo " ╭─────────────╮ "',
              'echo " │ Tilix patch │ "',
              'echo " ╰─────────────╯ "',
              ' tilixPatch="# Fixes VTE error when starting a new terminal\\n"',
              'tilixPatch+=\'if [ $TILIX_ID ] || [ $VTE_VERSION ]; then\\n\'',
              'tilixPatch+="  source /etc/profile.d/vte.sh\\n"',
              'tilixPatch+="fi\\n"',
              `sed -i "1s|^|\${tilixPatch}|" "${rcFile}"`,
              '',
            );
          }
          
          if (officalPkgs.includes('virtualbox')) {
            output.push(
              'echo " ╭─────────────╮ "',
              'echo " │ Virtual Box │ "',
              'echo " ╰─────────────╯ "',
              '# add your user to the VB group (for USB to work)',
              'sudo gpasswd -a $USER vboxusers',
              '# load the VB kernel module (may return an error - view troubleshooting)',
              'sudo modprobe vboxdrv',
              '# enable/start the VB web service',
              'sudo systemctl enable vboxweb.service && sudo systemctl start vboxweb.service',
              '',
            );
          }
          
          output.push('sudo reboot', '');
          
          const head = [
            '#!/usr/bin/env bash',
            '',
            'echo " ╭────────────────╮ "',
            'echo " │ Error Handling │ "',
            'echo " ╰────────────────╯ "',
            '# exit when any command fails',
            'set -e',
            '# keep track of the last executed command',
            "trap 'last_command=$current_command; current_command=$BASH_COMMAND' DEBUG",
            '# echo an error message before exiting',
            `trap 'echo "\\"\${last_command}\\" command failed with exit code $?."' EXIT`,
            '',
            'REPO_BIN="${PWD}"',
            '',
          ];
          
          return `${head.join('\n')}\n${output.join('\n')}`;
        };
        
        let checkNdx = 0;
        let comboNdx = 0;
        let folderNdx = 0;
        guiData.forEach(({ desc, icon, id, items, label }, ndx) => {
          let tabMarkup = '';
          
          items.forEach(([type, data]) => {  
            switch (type) {
              case 'checklist':
              case 'radiolist': {
                const genItemsMarkup = (arr, group, groupKey='') => {
                  return arr.map(([checked, item, desc], ndx) => {
                    let val = item;
                    let label = item;
                    if (item.includes(':')) {
                      const itemVals = item.split(':');
                      val = itemVals[1];
                      label = itemVals[0];
                    }
                    val = `${id}${groupKey}|${val}`;
                    
                    const descMarkup = desc
                      ? `<span class="item-row__desc">${desc}</span>`
                      : '';
                    let inputType = 'checkbox';
                    let inputName = `check${checkNdx}`;
                    
                    if (type === 'radiolist') {
                      inputType = 'radio';
                      inputName = group;
                    }
                    else {
                      checkNdx += 1;
                    }
                    
                    return `
                      <label class="item-row">
                        <span class="item-row__check">
                          <input type="${inputType}" name="${inputName}" value="${val}" ${checked && 'checked'} />
                        </span>
                        <code class="item-row__item">${label}</code>
                        ${descMarkup}
                      </label>
                    `;
                  }).join('');
                };
                
                if (Array.isArray(data)) {
                  tabMarkup += genItemsMarkup(data);
                }
                else {
                  Object.keys(data).forEach((group) => {
                    const groupItems = data[group];
                    let groupLabel = group;
                    let groupKey = '';
                    if (group.includes(':')) {
                      const g = group.split(':');
                      groupLabel = g[0];
                      groupKey = `:${g[1]}`;
                    }
                    
                    tabMarkup += `
                      <fieldset>
                        <legend>${groupLabel}</legend>
                        <div class="items-group">${genItemsMarkup(groupItems, groupLabel, groupKey)}</div>
                      </fieldset>
                    `;
                  });
                }
                break;
              }
              
              case 'combo-box': {
                const { id: cbId, label, options } = data;
                
                tabMarkup += `
                  <div class="combo-box">
                    <label>${label}</label>
                    <select name="cb${comboNdx}">
                      ${options.map(opt => {
                        let val = opt;
                        let label = opt;
                        if (opt.includes(':')) {
                          const optVals = opt.split(':');
                          val = optVals[1];
                          label = optVals[0];
                        }
                        val = (cbId !== undefined)
                          ? `${id}:${cbId}|${val}`
                          : `${id}|${val}`;
                        
                        return `<option value="${val}">${label}</option>`;
                      }).join('')}
                    </select>
                  </div>
                `;
                comboNdx += 1;
                break;
              }
              
              case 'folder-tree': {
                const iterate = (folders, parent='~') => {
                  const _class = parent === '~' ? 'folder-tree' : '';
                  const nestCount = parent.split('/').length - 2;
                  
                  const leadingBranch = nestCount > 0 ? Array(nestCount).fill(' │   ').join('') : '';
                  const markup = folders.map((folder, ndx) => {
                    const branch = (ndx === folders.length-1) ? ' └── ' : ' ├── ';
                    let _folder = folder;
                    let nested = '';
                    let labelData = '';
                    
                    if (Array.isArray(folder)) {
                      _folder = folder[0];
                      nested = iterate(folder[1], `${parent}/${_folder}`);
                      labelData = `data-is-parent="true"`;
                    }
                    
                    const val = `${id}|${parent}/${_folder}`;
                    const name = `fldr${folderNdx}`;
                    folderNdx += 1;
                    
                    return `
                      <li>
                        <label ${labelData} data-branch="${leadingBranch}${branch}">
                          <input type="checkbox" name="${name}" value="${val}" checked />
                          ${_folder}
                        </label>
                        ${nested}
                      </li>
                    `;
                  }).join('');
                  
                  return `<ul class="${_class}">${markup}</ul>`;
                };
                tabMarkup += iterate(data);
                break;
              }
            }  
          });
          
          const current = ndx === 0 ? 'current' : '';
          const iconMarkup = svgIcon(icon);
          tabsNav.insertAdjacentHTML('beforeend', `
            <button type="button" class="tabs-nav__btn ${current}" data-type="tab" data-ndx="${ndx}">
              ${iconMarkup}
              ${label}
            </button>
          `);
          tabsEl.insertAdjacentHTML('beforeend', `
            <div class="tab ${current}" data-ndx="${ndx}">
              <div class="tab__desc">${iconMarkup}${desc}</div>
              <div class="tab__body">
                ${tabMarkup}
              </div>
            </div>
          `);
        });
        
        form.addEventListener('click', (ev) => {
          const el = ev.target;
          
          if (el.nodeName === 'BUTTON') {
            ev.preventDefault();
            
            switch (el.dataset.type) {
              case 'cancel': 
                sendToStdOut('[CLOSE]');
                break;
              
              case 'save': {
                sendToStdOut(`[FILE:"install.sh"]\n${transformFormData()}`);
                sendToStdOut('[CLOSE]');
                break;
              }
              
              case 'tab': {
                const tabNdx = el.dataset.ndx;
                [...tabsEl.querySelectorAll('[data-ndx]')].forEach((el) => {
                  const { ndx } = el.dataset;
                  if (ndx === tabNdx) el.classList.add('current');
                  else el.classList.remove('current');
                });
                break;
              }
            }
          }
          else if (el.nodeName === 'LABEL' && el.dataset.isParent) {
            const checked = el.querySelector('input').checked;
            const nestedChecks = [...el.nextSibling.querySelectorAll('[type="checkbox"]')];
            nestedChecks.forEach((el) => {
              el.checked = !checked;
            });
          }
        });
      }
      catch (err) { alert(err); }
    </script>
  </body>
</html>
